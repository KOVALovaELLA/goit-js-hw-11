{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst apiKey = \"41764159-4dbb46db2acf8e3f55eb7fe99\"; //\n\n\nconst formEl = document.querySelector(\"form\");\nconst searchInputEl = document.getElementById(\"search-input\");\nconst searchResultsEl = document.querySelector(\".search-results\");\nconst showMoreButtonEl = document.getElementById(\"show-more-button\");\nconst loaderEl = document.getElementById(\"loader\"); \n\nlet inputData = \"\";\nlet page = 1;\nlet lightbox;\n\nfunction showLoader() {\n  loaderEl.style.display = \"block\";\n}\n\nfunction hideLoader() {\n  loaderEl.style.display = \"none\";\n}\n\nfunction clearGallery() {\n  searchResultsEl.innerHTML = \"\";\n}\n\nfunction createImageCard(imageData) {\n  const imageWrapper = document.createElement(\"a\");\n  imageWrapper.href = imageData.largeImageURL;\n  imageWrapper.classList.add(\"search-result\");\n\n  const image = document.createElement(\"img\");\n  image.src = imageData.webformatURL;\n  image.alt = imageData.tags;\n\n  const likes = document.createElement(\"p\");\n  likes.textContent = `Likes: ${imageData.likes}`;\n\n  const views = document.createElement(\"p\");\n  views.textContent = `Views: ${imageData.views}`;\n\n  const comments = document.createElement(\"p\");\n  comments.textContent = `Comments: ${imageData.comments}`;\n\n  const downloads = document.createElement(\"p\");\n  downloads.textContent = `Downloads: ${imageData.downloads}`;\n\n  imageWrapper.appendChild(image);\n  imageWrapper.appendChild(likes);\n  imageWrapper.appendChild(views);\n  imageWrapper.appendChild(comments);\n  imageWrapper.appendChild(downloads);\n\n  return imageWrapper;\n}\n\nasync function searchImages() {\n  showLoader(); // Показати індикатор завантаження\n\n  inputData = searchInputEl.value;\n  clearGallery();\n\n  const url = `https://pixabay.com/api/?key=${apiKey}&q=${inputData}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}`;\n\n  try {\n    const response = await fetch(url);\n    const data = await response.json();\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        title: \"\",\n        message: \"Sorry, there are no images matching your search query. Please try again!\",\n      });\n      return;\n    }\n\n    const results = data.hits;\n\n    results.forEach((result) => {\n      const imageCard = createImageCard(result);\n      searchResultsEl.appendChild(imageCard);\n    });\n\n    if (!lightbox) {\n      lightbox = new SimpleLightbox(\".search-results a\", {});\n    } else {\n      lightbox.refresh();\n    }\n\n    page++;\n\n    if (page > 1) {\n      showMoreButtonEl.style.display = \"block\";\n    }\n  } catch (error) {\n    console.error(\"Помилка під час обробки запиту:\", error.message);\n  } finally {\n    hideLoader(); // Приховати індикатор завантаження незалежно від результату\n  }\n}\n\nformEl.addEventListener(\"submit\", (event) => {\n  event.preventDefault();\n  page = 1;\n  searchImages();\n});\n\nshowMoreButtonEl.addEventListener(\"click\", () => {\n  searchImages();\n});"],"names":["apiKey","formEl","searchInputEl","searchResultsEl","showMoreButtonEl","loaderEl","inputData","page","lightbox","showLoader","hideLoader","clearGallery","createImageCard","imageData","imageWrapper","image","likes","views","comments","downloads","searchImages","url","data","iziToast","result","imageCard","SimpleLightbox","error","event"],"mappings":"6vBAKA,MAAMA,EAAS,qCAGTC,EAAS,SAAS,cAAc,MAAM,EACtCC,EAAgB,SAAS,eAAe,cAAc,EACtDC,EAAkB,SAAS,cAAc,iBAAiB,EAC1DC,EAAmB,SAAS,eAAe,kBAAkB,EAC7DC,EAAW,SAAS,eAAe,QAAQ,EAEjD,IAAIC,EAAY,GACZC,EAAO,EACPC,EAEJ,SAASC,GAAa,CACpBJ,EAAS,MAAM,QAAU,OAC3B,CAEA,SAASK,GAAa,CACpBL,EAAS,MAAM,QAAU,MAC3B,CAEA,SAASM,GAAe,CACtBR,EAAgB,UAAY,EAC9B,CAEA,SAASS,EAAgBC,EAAW,CAClC,MAAMC,EAAe,SAAS,cAAc,GAAG,EAC/CA,EAAa,KAAOD,EAAU,cAC9BC,EAAa,UAAU,IAAI,eAAe,EAE1C,MAAMC,EAAQ,SAAS,cAAc,KAAK,EAC1CA,EAAM,IAAMF,EAAU,aACtBE,EAAM,IAAMF,EAAU,KAEtB,MAAMG,EAAQ,SAAS,cAAc,GAAG,EACxCA,EAAM,YAAc,UAAUH,EAAU,QAExC,MAAMI,EAAQ,SAAS,cAAc,GAAG,EACxCA,EAAM,YAAc,UAAUJ,EAAU,QAExC,MAAMK,EAAW,SAAS,cAAc,GAAG,EAC3CA,EAAS,YAAc,aAAaL,EAAU,WAE9C,MAAMM,EAAY,SAAS,cAAc,GAAG,EAC5C,OAAAA,EAAU,YAAc,cAAcN,EAAU,YAEhDC,EAAa,YAAYC,CAAK,EAC9BD,EAAa,YAAYE,CAAK,EAC9BF,EAAa,YAAYG,CAAK,EAC9BH,EAAa,YAAYI,CAAQ,EACjCJ,EAAa,YAAYK,CAAS,EAE3BL,CACT,CAEA,eAAeM,GAAe,CAC5BX,IAEAH,EAAYJ,EAAc,MAC1BS,IAEA,MAAMU,EAAM,gCAAgCrB,OAAYM,kEAA0EC,IAElI,GAAI,CAEF,MAAMe,EAAO,MADI,MAAM,MAAMD,CAAG,GACJ,OAE5B,GAAIC,EAAK,KAAK,SAAW,EAAG,CAC1BC,EAAS,MAAM,CACb,MAAO,GACP,QAAS,0EACjB,CAAO,EACD,MACD,CAEeD,EAAK,KAEb,QAASE,GAAW,CAC1B,MAAMC,EAAYb,EAAgBY,CAAM,EACxCrB,EAAgB,YAAYsB,CAAS,CAC3C,CAAK,EAEIjB,EAGHA,EAAS,QAAO,EAFhBA,EAAW,IAAIkB,EAAe,oBAAqB,CAAE,CAAA,EAKvDnB,IAEIA,EAAO,IACTH,EAAiB,MAAM,QAAU,QAEpC,OAAQuB,EAAP,CACA,QAAQ,MAAM,kCAAmCA,EAAM,OAAO,CAClE,QAAY,CACRjB,GACD,CACH,CAEAT,EAAO,iBAAiB,SAAW2B,GAAU,CAC3CA,EAAM,eAAc,EACpBrB,EAAO,EACPa,GACF,CAAC,EAEDhB,EAAiB,iBAAiB,QAAS,IAAM,CAC/CgB,GACF,CAAC"}